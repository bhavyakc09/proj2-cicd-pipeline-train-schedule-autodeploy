plugins {
    id "com.github.node-gradle.node" version "3.0.1"
}

node {
    version = "14.17.1"
    npmVersion = "6.14.13"
    download = true
}

// Declare a task to create a zip of the app
task buildApp(type: Zip) {
    from ('.') {
        include "*"
        include "bin/**"
        include "data/**"
        include "node_modules/**"
        include "public/**"
        include "routes/**"
        include "views/**"
    }
    destinationDir(file("dist"))
    baseName "trainSchedule"
}

// Declare task dependencies
buildApp.dependsOn npmInstall
buildApp.dependsOn npm_build
buildApp.dependsOn npm_test
